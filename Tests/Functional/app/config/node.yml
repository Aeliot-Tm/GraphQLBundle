imports:
    - { resource: config.yml }

services:
    overblog_graph.test.resolver.node:
        class: Overblog\GraphBundle\Tests\Functional\app\Resolver\NodeResolver
        arguments:
            - "@overblog_graph.type_resolver"
        tags:
            - { name: "overblog_graph.resolver", alias: "node_type", method: "typeResolver" }
            - { name: "overblog_graph.resolver", alias: "node_id_fetcher", method: "idFetcher" }

overblog_graph:
    definitions:
        schema:
            query: Query
            mutation: ~
        types:
            Node:
                type: node
                config:
                    resolveType: '@=resolver("node_type", [value])'

            Query:
                type: object
                config:
                    fields:
                        node:
                            builder: Node
                            builderConfig:
                                nodeInterfaceType: Node
                                idFetcher: '@=resolver("node_id_fetcher", [value])'

            User:
                type: object
                config:
                    fields:
                        id:
                            type: ID!
                        name:
                            type: String
                    interfaces: [Node]

            Photo:
                type: object
                config:
                    fields:
                        id:
                            type: ID!
                        width:
                            type: Int
                    interfaces: [Node]
